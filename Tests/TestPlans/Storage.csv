Work Item Type,Title,Priority,Area Path,Iteration Path,Assigned To,Tags,Steps
Test Case,S3 Connection String - Environment Injection,1,SkyCMS\Editor,Release 1.0.1,,Storage;P1,"Deploy Editor stack with Publisher	Deployment completes
SSH or inspect ECS task environment	Environment variables visible
Verify ConnectionStrings__StorageConnectionString	Env var present; value matches Secrets Manager secret; contains bucket, region, key ID"
Test Case,Upload to S3 - Via Media Manager,1,SkyCMS\Editor,Release 1.0.1,,Storage;P1,"Upload image via Media Manager	Image uploaded
Verify in AWS S3 Console	Navigate to S3 bucket
Locate file	File present in correct folder; object metadata correct (content-type, etc.)"
Test Case,CloudFront OAI - Secure S3 Access,1,SkyCMS\Editor,Release 1.0.1,,Storage;P1,"Upload image to S3	Image uploaded
Attempt direct S3 URL access (e.g. https://bucket.s3.amazonaws.com/file.jpg)	Request sent
Verify access denied	403 Forbidden; bucket not publicly accessible
Access via CloudFront URL	Image loads; OAI grants access; CDN serves file"
Test Case,IAM User - S3 Policy Scoping,2,SkyCMS\Editor,Release 1.0.1,,Storage;P2,"Navigate to AWS IAM Console	IAM console opens
Locate skycms-s3-publisher-user	User found
Review attached policies	Policy scoped to specific S3 bucket; permissions: GetObject, PutObject, DeleteObject, ListBucket only"
Test Case,S3 Folder Structure - Organization,3,SkyCMS\Editor,Release 1.0.1,,Storage;P3,"Upload multiple assets (images, videos, docs)	Assets uploaded
Navigate to S3 bucket	Bucket opens
Verify folder structure	Files organized by type or date (e.g. /images/2025/12/, /videos/); consistent naming convention"
Test Case,S3 Lifecycle Policy - Cleanup,3,SkyCMS\Editor,Release 1.0.1,,Storage;P3,"Upload old test files to S3	Files uploaded; last modified > 90 days (if lifecycle enabled)
Wait for lifecycle policy execution	Time elapses
Verify cleanup	Old files moved to cheaper storage tier or deleted; active files retained"
Test Case,CloudFront Invalidation - Cache Clear,2,SkyCMS\Editor,Release 1.0.1,,Storage;P2,"Edit and republish a page with updated image	Page republished
Verify CloudFront invalidation triggered	Invalidation created in CloudFront console
Wait for invalidation complete	Invalidation status = completed
Access page via CloudFront	Updated image loads; cache refreshed"
Test Case,S3 Versioning - File History,3,SkyCMS\Editor,Release 1.0.1,,Storage;P3,"Upload image	Image uploaded to S3
Replace image with new version	New file uploaded with same name
Navigate to S3 bucket	Bucket opens
Enable Show Versions	Versions visible
Verify versions	Both versions present; old version retrievable; version IDs distinct"
Test Case,Storage Connection String - Secret Rotation,3,SkyCMS\Editor,Release 1.0.1,,Storage;P3,"Navigate to AWS Secrets Manager	Secrets Manager console opens
Rotate SkyCms-StorageConnectionString secret	Secret rotated; new IAM access key generated
Restart ECS task (or wait for automatic refresh)	Task reloads
Verify upload	Image upload succeeds with new credentials; no errors"
Test Case,Error Handling - S3 Unavailable,3,SkyCMS\Editor,Release 1.0.1,,Storage;P3,"Simulate S3 outage (network policy or bucket inaccessible)	S3 unavailable
Attempt image upload	Upload triggered
Verify error message	User-friendly error: 'Storage unavailable; please try again'; upload queued or retry option shown"
